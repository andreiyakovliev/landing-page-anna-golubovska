name: Build and Deploy to GitHub Pages

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
      # 1Ô∏è‚É£ –ö–ª–æ–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
      - name: Checkout repository üõéÔ∏è
        uses: actions/checkout@v3

      # 2Ô∏è‚É£ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Node.js
      - name: Setup Node.js üîß
        uses: actions/setup-node@v3
        with:
          node-version: 18
          cache: 'npm'

      # 3Ô∏è‚É£ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —ñ build
      - name: Install dependencies & Build üèóÔ∏è
        run: |
          npm ci
          node node_modules/gulp/bin/gulp.js build --build

      # 4Ô∏è‚É£ –î–µ–ø–ª–æ–π –Ω–∞ GitHub Pages
      - name: Deploy to GitHub Pages üöÄ
        uses: JamesIves/github-pages-deploy-action@4.1.0
        with:
          branch: gh-pages        # –≥—ñ–ª–∫–∞, –∫—É–¥–∏ –ø—É—à–∏—Ç–∏
          folder: dist            # –ø–∞–ø–∫–∞ –∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º gulp build
          clean: true             # –æ—á–∏—â–∞—î —Å—Ç–∞—Ä—ñ —Ñ–∞–π–ª–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º
